# Design for the NioPD System

## Vision and Target Audience

### Vision
To create an AI-powered assistant for Product Managers that automates the tedious aspects of product discovery, definition, and stakeholder management, allowing PMs to focus on high-impact strategic work. `NioPD` will transform raw inputs (user feedback, market data, team ideas) into clear, actionable, and well-prioritized product plans.

### Target Audience
The primary user is the **non-technical or semi-technical Product Manager** in a small to medium-sized tech company. This user is skilled in product strategy, user research, and communication but may not be comfortable with developer-centric tools like the command line, git, or complex CI/CD workflows.

### Core Problems to Solve
`NioPD` is designed to address the following pain points for Product Managers:
1.  **Feedback Overload:** PMs are inundated with unstructured feedback from various channels (Intercom, Slack, surveys, sales calls). It's time-consuming to manually synthesize this data into actionable insights.
2.  **Tedious Documentation:** Writing and maintaining PRDs, user stories, and roadmaps is a manual and repetitive process.
3.  **Stakeholder Misalignment:** Keeping stakeholders (engineering, design, leadership, sales) consistently informed and aligned requires significant effort in creating custom reports, presentations, and updates.
4.  **Difficulty in Prioritization:** Connecting strategic goals to daily tasks and making data-informed prioritization decisions is challenging.
5.  **Gap between Strategy and Execution:** There's often a disconnect between the high-level product strategy and the work being done by the development team.

## System Architecture

`NioPD` follows a file-based, agent-driven architecture that emphasizes modularity, reusability, and clear separation of concerns. All components are organized within a structured directory system to ensure consistency and ease of maintenance.

### Directory Structure

The NioPD system is composed of several key types of components, all stored within the `.claude/` directory. This structure separates the logic (prompts), actions (scripts), rules, and data.

#### 1. `agents/`
- **Purpose:** Defines specialized "sub-agents" that act as context firewalls.
- **Implementation:** Files like `niopd-competitor-analyzer.md` and `niopd-data-analyst.md` define the roles of these agents. The core principle is that these agents perform "heavy lifting" (like analyzing large datasets or researching market trends) and return only a concise summary to the main AI conversation, thus preserving the limited context window.
- **Best Practices:**
  - Each agent should have a single, clearly defined purpose
  - Agents should be designed to process large amounts of data and produce structured outputs
  - Context preservation is critical - agents should return concise summaries

#### 2. `commands/`
- **Purpose:** Contains the core logic of the system in the form of detailed markdown-based prompts.
- **Implementation:** Each `.md` file in this directory corresponds to a user-facing command (e.g., `new-initiative.md`). These files are not just documentation; they are prescriptive programs for the AI to execute, detailing pre-flight checks, instructions, output formats, quality control, and error handling.
- **Structure:** Commands follow a 5-part pattern:
  1. **The User Command**: Entry point initiated by the user (e.g., `/niopd:new-initiative "My Feature"`)
  2. **The Command Prompt (.md)**: Detailed instructions for the AI on how to execute the command
  3. **The Agent (.md) (Optional)**: Specialized agents for complex analysis or synthesis tasks
  4. **The Template (.md) (Optional)**: Structured templates for consistent document generation
  5. **The Script (.sh) (Optional)**: Shell scripts for system-level file operations
- **Best Practices:**
  - Commands should be designed to be more conversational and less technical
  - Each command must have clear pre-flight validation steps
  - Error handling should be explicitly defined
  - Commands should produce consistent, structured outputs

#### 3. `scripts/`
- **Purpose:** Contains shell scripts that perform actions on the user's local system. These are the "hands" of the system.
- **Implementation:** Scripts like `init.sh` and `new-initiative.sh` handle tasks such as installing dependencies, creating directories, and file operations. They are called by the AI when instructed by a command prompt.
- **Best Practices:**
  - All scripts should include proper error handling and validation
  - Scripts should provide clear success/error feedback
  - Permissions should be properly set (`chmod +x`)
  - Scripts should be portable across different systems

#### 4. `templates/`
- **Purpose:** Contains reusable templates for documents generated by the system.
- **Implementation:** Templates like `prd-template.md` and `initiative-template.md` ensure consistent structure for all generated documents.
- **Best Practices:**
  - Templates should use consistent variable formatting (`{{variable_name}}`)
  - All necessary sections for comprehensive documentation should be included
  - Templates should be flexible enough to accommodate different use cases

#### 5. Data Directories (`niopd-workspace/`)
- **Purpose:** Stores the artifacts generated during the product management workflow.
- **Implementation:**
  - `niopd-workspace/initiatives/`: Contains high-level strategic product initiatives
  - `niopd-workspace/prds/`: Stores Product Requirement Documents
  - `niopd-workspace/reports/`: Contains generated reports and analysis
  - `niopd-workspace/roadmaps/`: Stores roadmap documents
  - `niopd-workspace/feedback-sources/`: Stores raw feedback data
- **Best Practices:**
  - Directory structure should be intuitive and well-documented
  - Files should be organized by type and purpose
  - Consistent naming conventions should be used

## Features and Command Reference

The following is a proposed list of commands for the `NioPD` system. They are designed to be conversational and map directly to a Product Manager's core workflows.

### Initiative Management
- **`/niopd:new-initiative "Q3 Launch"`**
  - **Action:** Starts a guided workflow to define a new high-level product initiative.
  - **Asks for:** Strategic goals, target metrics (KPIs), budget, and relevant teams.
  - **Output:** Creates a new file in `niopd-workspace/initiatives/q3-launch.md`.

### Feedback and Discovery
- **`/niopd:import-feedback --from=intercom`**
  - **Action:** Connects to a specified source (via API or file upload) to import raw user feedback.
  - **Agent:** May use a helper script to handle the connection.
  - **Output:** Saves the raw data in `niopd-workspace/feedback-sources/`.

- **`/niopd:summarize-feedback --for="Q3 Launch"`**
  - **Action:** Uses the `feedback-synthesizer` agent to analyze all feedback related to a specific initiative.
  - **Agent:** `feedback-synthesizer`.
  - **Output:** A summary of key themes, user quotes, and feature requests, saved as a report in `niopd-workspace/reports/`.

### Product Definition
- **`/niopd:draft-prd --for="Q3 Launch"`**
  - **Action:** Generates a complete PRD draft using a template.
  - **Uses:** The initiative definition and the synthesized feedback report.
  - **Output:** A new file in `niopd-workspace/prds/`.

- **`/niopd:edit-prd <prd-name>`**
  - **Action:** Opens the specified PRD for manual editing and refinement.

### Roadmapping and Communication
- **`/niopd:update-roadmap`**
  - **Action:** Uses the `roadmap-generator` agent to create or update a visual roadmap.
  - **Agent:** `roadmap-generator`.
  - **Uses:** The status and timelines of all active initiatives.
  - **Output:** A file in `niopd-workspace/roadmaps/roadmap.md`.

- **`/niopd:generate-update --for=stakeholders`**
  - **Action:** Uses the `presentation-builder` agent to create a progress update.
  - **Agent:** `presentation-builder`.
  - **Asks for:** Audience (e.g., stakeholders, engineering team) to tailor the content.
  - **Output:** A markdown presentation file in `niopd-workspace/reports/`.

### Tracking and Analysis
- **`/niopd:track-kpis --for="Q3 Launch"`**
  - **Action:** Uses the `kpi-tracker` agent to fetch the latest metrics for an initiative.
  - **Agent:** `kpi-tracker`.
  - **Output:** A status report with charts and numbers.

### Advanced: Strategy & Discovery
- **`/niopd:analyze-competitor --url=<url>`**: Analyzes a competitor's website.
- **`/niopd:summarize-interview --file=<path>`**: Summarizes a user interview transcript.
- **`/niopd:analyze-data --file=<path> --query="..."`**: Answers a natural language question about a data file.
- **`/niopd:generate-personas --from=<summary>`**: Creates user personas from a feedback summary.
- **`/niopd:research-trends --topic="..."`**: Researches and summarizes market trends on a topic.

### Advanced: Planning & Definition
- **`/niopd:draw-diagram --type=<type> --desc="..."`**: Creates a PlantUML or Mermaid diagram from a description.
- **`/niopd:assess-feasibility --for=<prd>`**: Flags technically complex requirements in a PRD.
- **`/niopd:write-stories --for=<prd>`**: Writes detailed user stories and acceptance criteria for a PRD.
- **`/niopd:identify-risks --for=<prd>`**: Identifies potential risks for an initiative.

### Advanced: Execution & Launch
- **`/niopd:draft-release-notes --for=<prd>`**: Generates draft release notes for a feature.
- **`/niopd:generate-faq --for=<prd>`**: Creates a list of FAQs for a new feature.
- **`/niopd:simplify-update --for=<initiative> --audience=...`**: Tailors a stakeholder update for a specific audience.
- **`/niopd:brainstorm-names --desc="..."`**: Brainstorms names for a new feature.